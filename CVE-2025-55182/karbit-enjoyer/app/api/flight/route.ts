// app/api/flight/route.ts
import { deserializeFlight } from "@/lib/flight";

export async function POST(req: Request) {
  const form = await req.formData();

  try {
    deserializeFlight(form);
    return new Response("OK");
  } catch (err: any) {
    // Mimic NEXT_REDIRECT leak
    if (err.digest) {
      return new Response(err.digest, { status: 302 });
    }
    return new Response(err.message, { status: 500 });
  }
}
